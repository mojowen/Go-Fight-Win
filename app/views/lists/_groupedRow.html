<script type="text/html" id="groupedRow">

	<!-- ko if: typeof $data != 'undefined' -->

	<!-- ko if: $data.rows.length !=  0 && !currentView().groups.pivot() -->
			<tr>
				<!-- ko if: typeof $data._value != 'undefined' -->
				<td data-bind="attr: {'rowspan': $data.rows.filter(function(elem) { return elem != undefined; }).length + 1 } ">
					<span data-bind="text: $data._value"></span>
				</td>
				<!-- /ko -->
			</tr>

					<!-- ko template: {name: 'groupedRow', foreach: $data.rows} -->
					<!-- /ko -->

			<tr class="total">
				<!-- ko foreach: viewModel.groupedFields -->
					<!-- ko if: $data.name == $parent._field -->
					<td colspan="2">
						TOTAL:
					</td>
					<!-- /ko -->
					<!-- ko if: $data.constructor.name == 'fieldModel' -->
					<td>
						<!-- ko if: $data.report().name != currentView().goal.field() || !currentView().goal.label() -->
							<span data-bind="text: $parent[$data.to_param][$data.report().report]"></span>
						<!-- /ko -->
						<!-- ko if: $data.report().name == currentView().goal.field() && currentView().goal.label() -->
							<span data-bind="text: ( $parent[currentView().goal.field()][ currentView().goal().field().report] + '/' + currentView().goal().value() + ' (' + Math.round($parent[currentView().goal.field()][ currentView().goal().field().report] / currentView().goal().value() * 1000 ) / 10 ) + '%)' "></span>
						<!-- /ko -->
					</td>
					<!-- /ko -->
				<!-- /ko -->
			</tr>
	<!-- /ko -->

	<!-- ko if: $data.rows.length ==  0 || currentView().groups.pivot() -->
		<tr>

			<!-- ko if: typeof $data._value != 'undefined' -->
			<td >
				<span data-bind="text: $data._value"></span>
			</td>
			<!-- /ko -->

			<!-- ko foreach: viewModel.groupedFields -->
				<!-- ko if: $data.id != undefined -->
				<td>
					<!-- ko if: $data.report().name != currentView().goal.field() || !currentView().goal.label() -->
						<span data-bind="text: $parent[$data.to_param][$data.report().report]"></span>
					<!-- /ko -->
					<!-- ko if: $data.report().name == currentView().goal.field() && currentView().goal.label() -->
						<span data-bind="text: ( $parent[currentView().goal.field()][ currentView().goal().field().report] + '/' + currentView().goal().value() + ' (' + Math.round($parent[currentView().goal.field()][ currentView().goal().field().report] / currentView().goal().value() * 1000 ) / 10 ) + '%)' "></span>
					<!-- /ko -->
				</td>
				<!-- /ko -->

				<!-- ko if: $data.report == 'all' && currentView().groups.pivot() -->
				<td>
						<!-- ko if: $parent.rows[viewModel.groupedFields().indexOf($data)-1] != undefined && currentView().reportOn() != undefined -->
							
						<!-- ko if: currentView().reportOn().label != 'goal' -->
							<span data-bind="text: $parent.rows[viewModel.groupedFields().indexOf($data)-1][currentView().reportOn().name][currentView().reportOn().report] "></span>
						<!-- /ko -->
						<!-- ko if: currentView().reportOn().label == 'goal' -->
							<span data-bind="text: ( $parent.rows[viewModel.groupedFields().indexOf($data)-1][currentView().reportOn().name][currentView().reportOn().report] + '/' + currentView().goal().value() + ' (' + Math.round($parent.rows[viewModel.groupedFields().indexOf($data)-1][currentView().reportOn().name][currentView().reportOn().report] / currentView().goal().value() * 1000 ) / 10 ) + '%)' "></span>
						<!-- /ko -->
						
						<!-- /ko -->
				</td>
				<!-- /ko -->
				
				<!-- ko if: $data.name == 'Totals' && currentView().reportOn() != undefined -->
				<td>
					<!-- ko if: currentView().reportOn().label != 'goal' -->
						<span data-bind="text: $parent[currentView().reportOn().name][currentView().reportOn().report] "></span>
					<!-- /ko -->
					<!-- ko if: currentView().reportOn().label == 'goal' -->
						<span data-bind="text: ( $parent[currentView().reportOn().name][currentView().reportOn().report] + '/' + currentView().goal().value() + ' (' + Math.round($parent[currentView().reportOn().name][currentView().reportOn().report] / currentView().goal().value() * 1000 ) / 10 ) + '%)' "></span>
					<!-- /ko -->
					
				</td>
				<!-- /ko -->
				

			<!-- /ko -->
		</tr>
		
	<!-- /ko -->

	<!-- /ko -->

</script>