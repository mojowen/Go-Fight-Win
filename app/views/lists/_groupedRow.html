<script type="text/html" id="groupedRow">

	<!-- ko if: typeof $data != 'undefined' -->
	
	<!-- ko if: $data.rows.length !=  0 && !pivot() -->
			<tr>
				<!-- ko if: typeof $data._value != 'undefined' -->
				<td data-bind="attr: {'rowspan': $data.rows.filter(function(elem) { return elem != undefined; }).length + 1 } ">
					<span data-bind="text: $data._value"></span>
				</td>
				<!-- /ko -->
			</tr>

					<!-- ko template: {name: 'groupedRow', foreach: $data.rows} -->
					<!-- /ko -->

			<tr class="total">
				<!-- ko foreach: viewModel.groupedFields -->
					<!-- ko if: $data.name == $parent._field -->
					<td colspan="2">
						TOTAL:
					</td>
					<!-- /ko -->
					<!-- ko if: $data.constructor.name == 'fieldModel' -->
					<td>
						<span data-bind="text: $parent[$data.name][$data.report]"></span>
					</td>
					<!-- /ko -->
				<!-- /ko -->
			</tr>
	<!-- /ko -->

	<!-- ko if: $data.rows.length ==  0 || pivot() -->
		<tr>

			<!-- ko if: typeof $data._value != 'undefined' -->
			<td >
				<span data-bind="text: $data._value"></span>
			</td>
			<!-- /ko -->

			<!-- ko foreach: viewModel.groupedFields -->
				<!-- ko if: $data.constructor.name == 'fieldModel' -->
				<td>
					<span data-bind="text: $parent[$data.name][$data.report]"></span>
				</td>
				<!-- /ko -->

				<!-- ko if: $data.report == 'all' && pivot() -->
				<td>
						<!-- ko if: $parent.rows[viewModel.groupedFields().indexOf($data)-1] != undefined && currentView().reportOn() != undefined -->
						<span data-bind="text: $parent.rows[viewModel.groupedFields().indexOf($data)-1][currentView().reportOn().name][currentView().reportOn().report] "></span>
						<!-- /ko -->
				</td>
				<!-- /ko -->
				
				<!-- ko if: $data.name == 'Totals' && currentView().reportOn() != undefined -->
				<td>
					<span data-bind="text: $parent[currentView().reportOn().name][currentView().reportOn().report], visible: iiii = $parents "></span>
				</td>
				<!-- /ko -->
				

			<!-- /ko -->
		</tr>
		
	<!-- /ko -->

	<!-- /ko -->

</script>