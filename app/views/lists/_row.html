<script type="text/html" id="row">

	<!-- ko if: typeof $data != 'undefined' -->

		<!-- ko if: $data.constructor.name == 'rowModel' -->
			<tr>
				<!-- ko foreach: fields -->
				<td>
					<textarea data-bind="value: $parent[$data.name], valueUpdate: 'afterkeydown'"></textarea>
				</td>
				<!-- /ko -->
				<td data-bind="template: {name: $data._menu()}">
				</td>
			</tr>
		<!-- /ko -->

		<!-- ko ifnot: $data.constructor.name == 'rowModel' -->

			<tr>
				<td data-bind="attr: { colspan: fields().length }">
					<span data-bind="text: $data._value"></span>
				</td>
			</tr>

			<!-- ko template: {name: 'row', foreach: $data.rows} -->
			<!-- /ko -->

		<!-- /ko -->

	<!-- /ko -->

</script>

<script type="text/html" id="newRowMenu">
	<span class="add clickable">Add</span>
	<span class="remove clickable">Discard</span>
</script>

<script type="text/html" id="rowMenu">
	<span class="remove clickable">
		Delete
	</span>
</script>
